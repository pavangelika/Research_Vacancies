<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vacancy Report by Professional Role - {{ current_date }}</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Анализ рынка вакансий на {{ current_date }}</h1>

    <div class="tabs">
        {% for role in roles %}
        <button class="tab-button" onclick="openTab(event, 'tab-{{ loop.index }}')">{{ role.id }}</button>
        {% endfor %}
    </div>

    {% for role in roles %}
    <div id="tab-{{ loop.index }}" class="tab-content">
        <h2>{{ role.name }} (ID: {{ role.id }})</h2>
        <p>Количество вакансий: <strong>{{ role.total }}</strong></p>
        <p>Количество открытых вакансий: <strong>{{ role.open }}</strong></p>
        <p>Количество архивных вакансий: <strong>{{ role.close }}</strong></p>
    </div>
    {% endfor %}

    <script>
        function openTab(evt, tabId) {
            var i, tabcontent, tabbuttons;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tabbuttons = document.getElementsByClassName("tab-button");
            for (i = 0; i < tabbuttons.length; i++) {
                tabbuttons[i].className = tabbuttons[i].className.replace(" active", "");
            }
            document.getElementById(tabId).style.display = "block";
            evt.currentTarget.className += " active";
        }

        document.addEventListener("DOMContentLoaded", function() {
            var firstTab = document.getElementsByClassName("tab-button")[0];
            if (firstTab) firstTab.click();
        });
    </script>
</body>
</html>